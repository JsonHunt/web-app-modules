// Generated by CoffeeScript 1.9.1
(function() {
  var express, path, router, service;

  express = require('express');

  path = require('path');

  service = require('./user-service');

  module.exports = router = express.Router();

  router.use(express["static"](path.join(__dirname, 'client')));

  router.use('/rest/getUsers', function(req, res, next) {
    return service.getUsers(req.body.filters, function(err, users) {
      return res.json({
        error: err,
        users: users
      });
    });
  });

  router.use('/rest/getUser', function(req, res, next) {
    return service.getUser(req.query.id, function(err, user) {
      return res.json({
        error: err,
        user: user
      });
    });
  });

  router.use('/rest/suspendUser', function(req, res, next) {
    return service.suspendUser(req.body.id, req.body.reason, function(err) {
      return res.json({
        error: err
      });
    });
  });

  router.use('/rest/unsuspendUser', function(req, res, next) {
    return service.unsuspendUser(req.body.id, req.body.reason, function(err) {
      return res.json({
        error: err
      });
    });
  });

  router.use('/rest/getUserStats', function(req, res, next) {
    return service.getStats(function(err, stats) {
      return res.json({
        error: err,
        stats: stats
      });
    });
  });

}).call(this);
